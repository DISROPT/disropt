

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Consensus algorithms &mdash; disropt 0.0.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Distributed Logic AND" href="logic_and.html" />
    <link rel="prev" title="Examples" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> disropt
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quick start</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Consensus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classical-consensus">Classical consensus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#time-varying-graphs">Time-varying graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-wise-consensus">Block-wise consensus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asynchronous-consensus">Asynchronous consensus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="logic_and.html">Logic AND</a></li>
<li class="toctree-l3"><a class="reference internal" href="set_membership.html">Set Membership</a></li>
<li class="toctree-l3"><a class="reference internal" href="subgradient.html">Distributed Subgradient</a></li>
<li class="toctree-l3"><a class="reference internal" href="gradient_tracking.html">Gradient Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="dual_decomposition.html">Distributed Dual Decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="admm.html">Distributed ADMM</a></li>
<li class="toctree-l3"><a class="reference internal" href="asymm.html">ASYMM</a></li>
<li class="toctree-l3"><a class="reference internal" href="constraints_consensus.html">Constraints Consensus</a></li>
<li class="toctree-l3"><a class="reference internal" href="dual_subgradient.html">Distributed Dual Subgradient</a></li>
<li class="toctree-l3"><a class="reference internal" href="primal_decomposition.html">Distributed Primal Decomposition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#complex-examples">Complex examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_documentation/index.html">API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html">Advanced features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgements/index.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">disropt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li>Consensus algorithms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/examples/basic/consensus.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="consensus-algorithms">
<h1>Consensus algorithms<a class="headerlink" href="#consensus-algorithms" title="Permalink to this headline">¶</a></h1>
<div class="section" id="classical-consensus">
<h2>Classical consensus<a class="headerlink" href="#classical-consensus" title="Permalink to this headline">¶</a></h2>
<p>The classical consensus algorithm is implemented through the <code class="xref py py-class docutils literal notranslate"><span class="pre">Consensus</span></code> class.</p>
<p>From the perspective of agent <span class="math notranslate nohighlight">\(i\)</span> the classical consensus algorithm works as follows. For <span class="math notranslate nohighlight">\(k=0,1,\dots\)</span></p>
<div class="math notranslate nohighlight">
\[x_i^{k+1} = \sum_{j=1}^N w_{ij} x_j^k\]</div>
<p>where <span class="math notranslate nohighlight">\(x_i\in\mathbb{R}^n\)</span> and <span class="math notranslate nohighlight">\(w_{ij}\)</span> is the weight assigned by agent <span class="math notranslate nohighlight">\(i\)</span> to agent <span class="math notranslate nohighlight">\(j\)</span>. Usually, average consensus (i.e., the convergence of the local estimate sequences to the initial average) is guaranteed only if the weights <span class="math notranslate nohighlight">\(w_{ij}\)</span> form a doubly-stochastic matrix. Otherwise, agreement is still reached but at some other point.</p>
<p>In order to simulate a consensus algorithm over a static undirected graph (with a doubly-stochastic weight matrix), create a file containing the following code and call it <a class="reference internal" href="#launcher-py"><span class="std std-ref">launcher.py</span></a></p>
<div class="literal-block-wrapper docutils container" id="launcher-py">
<div class="code-block-caption"><span class="caption-text">launcher.py</span><a class="headerlink" href="#launcher-py" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpi4py</span> <span class="k">import</span> <span class="n">MPI</span>
<span class="kn">from</span> <span class="nn">disropt.agents</span> <span class="k">import</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">disropt.algorithms</span> <span class="k">import</span> <span class="n">Consensus</span>
<span class="kn">from</span> <span class="nn">disropt.utils.graph_constructor</span> <span class="k">import</span> <span class="n">binomial_random_graph</span><span class="p">,</span> <span class="n">metropolis_hastings</span>

<span class="c1"># get MPI info</span>
<span class="n">comm</span> <span class="o">=</span> <span class="n">MPI</span><span class="o">.</span><span class="n">COMM_WORLD</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">()</span>
<span class="n">local_rank</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">()</span>

<span class="c1"># Generate a common graph (everyone use the same seed)</span>
<span class="n">Adj</span> <span class="o">=</span> <span class="n">binomial_random_graph</span><span class="p">(</span><span class="n">nproc</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">W</span> <span class="o">=</span> <span class="n">metropolis_hastings</span><span class="p">(</span><span class="n">Adj</span><span class="p">)</span>

<span class="c1"># reset local seed</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>

<span class="c1"># create local agent</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">in_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
              <span class="n">out_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[:,</span> <span class="n">local_rank</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
              <span class="n">in_weights</span><span class="o">=</span><span class="n">W</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c1"># instantiate the consensus algorithm</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># decision variable dimension (n, 1)</span>
<span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">algorithm</span> <span class="o">=</span> <span class="n">Consensus</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
                      <span class="n">initial_condition</span><span class="o">=</span><span class="n">x0</span><span class="p">,</span>
                      <span class="n">enable_log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># enable storing of the generated sequences</span>

<span class="c1"># run the algorithm</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># print solution</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Agent </span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">get_result</span><span class="p">()))</span>

<span class="c1"># save data</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agents.npy&quot;</span><span class="p">,</span> <span class="n">nproc</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_sequence.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">sequence</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>And then execute it with the desired number of agents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">-</span><span class="n">np</span> <span class="mi">12</span> <span class="o">--</span><span class="n">oversubscribe</span> <span class="n">python</span> <span class="n">launcher</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>where the flag <code class="docutils literal notranslate"><span class="pre">--oversubscribe</span></code> is necessary only if the requested number of agents (12 in this case) is higher than the available number of cores (or computing units).</p>
<p><strong>Plot the generated sequences</strong></p>
<p>In order to plot the local sequences generated by the algorithm, we create the file <a class="reference internal" href="#results-py"><span class="std std-ref">results.py</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="results-py">
<div class="code-block-caption"><span class="caption-text">results.py</span><a class="headerlink" href="#results-py" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Load the number of agents</span>
<span class="n">N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;agents.npy&quot;</span><span class="p">)</span>

<span class="c1"># Load the locally generated sequences</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_sequence.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="c1"># Plot the evolution of the local estimates</span>
<span class="c1"># generate N colors</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="c1"># generate figure</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">dims</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">iterations</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># to avoid generating multiple labels</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">iterations</span><span class="p">),</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;agent </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">iterations</span><span class="p">),</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Evolution of the local estimates&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;iterations ($k$)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$x_i^k$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;results_fig.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>We execute <a class="reference internal" href="#results-py"><span class="std std-ref">results.py</span></a> through:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">results</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<img alt="../../_images/results_fig.png" src="../../_images/results_fig.png" />
</div>
<div class="section" id="time-varying-graphs">
<h2>Time-varying graphs<a class="headerlink" href="#time-varying-graphs" title="Permalink to this headline">¶</a></h2>
<p>Convergence of consensus algorithms is still achieved over time-varying (possibly directed) graphs, provided that they are jointly strongly connected.</p>
<p>In this case, one can use the <code class="xref py py-class docutils literal notranslate"><span class="pre">set_neighbors</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">set_weights</span></code> methods of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Agent</span></code> class in order to modify the communication network when necessary. This can be done in various ways, for example by overriding the <code class="xref py py-class docutils literal notranslate"><span class="pre">run</span></code> method of the algorithm of by calling it multiple times over different graphs. For example, suppose that the graph changes every 100 iterations and that you want to perform 1000 iterations, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="c1"># generate a new common graph (everyone use the same seed)</span>
    <span class="n">Adj</span> <span class="o">=</span> <span class="n">construct_graph</span><span class="p">(</span><span class="n">nproc</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">g</span><span class="p">)</span>
    <span class="n">W</span> <span class="o">=</span> <span class="n">metropolis_hastings</span><span class="p">(</span><span class="n">Adj</span><span class="p">)</span>

    <span class="c1"># set new neighbors and weights</span>
    <span class="n">agent</span><span class="o">.</span><span class="n">set_neighbors</span><span class="p">(</span><span class="n">in_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                        <span class="n">out_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[:,</span> <span class="n">local_rank</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">agent</span><span class="o">.</span><span class="n">set_weights</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="n">W</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

    <span class="n">algorithm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="block-wise-consensus">
<h2>Block-wise consensus<a class="headerlink" href="#block-wise-consensus" title="Permalink to this headline">¶</a></h2>
<p>Consensus can be also performed block-wise with respect to the decision variable by using the <code class="xref py py-class docutils literal notranslate"><span class="pre">BlockConsensus</span></code> class.</p>
<p>From the perspective of agent <span class="math notranslate nohighlight">\(i\)</span> the algorithm works as follows. At iteration <span class="math notranslate nohighlight">\(k\)</span>, if the agent is awake, it selects a random block <span class="math notranslate nohighlight">\(\ell_i^k\)</span> of its local solution and updates</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{i,\ell}^{k+1} = \begin{cases}
        \sum_{j\in\mathcal{N}_i} w_{ij} x_{j\mid i,\ell}^k &amp; \text{if} \ell = \ell_i^k \\
        x_{i,\ell}^{k} &amp; \text{otherwise}
        \end{cases}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathcal{N}_i\)</span> is the current set of in-neighbors and <span class="math notranslate nohighlight">\(x_{j\mid i},j\in\mathcal{N}_i\)</span> is the local copy of <span class="math notranslate nohighlight">\(x_j\)</span> available at node <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(x_{i,\ell}\)</span> denotes the <span class="math notranslate nohighlight">\(\ell\)</span>-th block of <span class="math notranslate nohighlight">\(x_i\)</span>. Otherwise <span class="math notranslate nohighlight">\(x_{i}^{k+1}=x_i^k\)</span>.</p>
<p>Moreover, at each iteration, each agent can update its local estimate or not at each iteration according to a certain probability (awakening_probability), thus modeling some <cite>asyncrhony</cite>.</p>
<p>The algorithm can be istantiated by providing a list of blocks of the decision variable and the probabilities of drawing each block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">BlockConsensus</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
                           <span class="n">initial_condition</span><span class="o">=</span><span class="n">x0</span><span class="p">,</span>
                           <span class="n">enable_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">blocks_list</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
                           <span class="n">probabilities</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
                           <span class="n">awakening_probability</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="asynchronous-consensus">
<h2>Asynchronous consensus<a class="headerlink" href="#asynchronous-consensus" title="Permalink to this headline">¶</a></h2>
<p>Asynchronous consensus can be seen as a sort of synchronous consensus over time-varying graphs with delays (which may model non negligible computation times and unreliable links) and it is implemented in the <code class="xref py py-class docutils literal notranslate"><span class="pre">AsynchronousConsensus</span></code> class.</p>
<p>When running this algorithm, you can control the computation and sleep times of each agent and the communication channels failure probabilities. Moreover, when running asynchronous algorithms, you have to set the total duration of the execution (and not the number of iterations). We provide the following example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpi4py</span> <span class="k">import</span> <span class="n">MPI</span>
<span class="kn">from</span> <span class="nn">disropt.agents</span> <span class="k">import</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="nn">disropt.algorithms</span> <span class="k">import</span> <span class="n">AsynchronousConsensus</span>
<span class="kn">from</span> <span class="nn">disropt.utils.graph_constructor</span> <span class="k">import</span> <span class="n">binomial_random_graph</span><span class="p">,</span> <span class="n">metropolis_hastings</span>


<span class="c1"># get MPI info</span>
<span class="n">comm</span> <span class="o">=</span> <span class="n">MPI</span><span class="o">.</span><span class="n">COMM_WORLD</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">()</span>
<span class="n">local_rank</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">()</span>

<span class="c1"># Generate a common graph (everyone use the same seed)</span>
<span class="n">Adj</span> <span class="o">=</span> <span class="n">binomial_random_graph</span><span class="p">(</span><span class="n">nproc</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">W</span> <span class="o">=</span> <span class="n">metropolis_hastings</span><span class="p">(</span><span class="n">Adj</span><span class="p">)</span>

<span class="c1"># reset local seed</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>

<span class="c1"># create local agent</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">in_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
    <span class="n">out_neighbors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">Adj</span><span class="p">[:,</span> <span class="n">local_rank</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
    <span class="n">in_weights</span><span class="o">=</span><span class="n">W</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c1"># instantiate the asynchronous consensus algorithm</span>
<span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">algorithm</span> <span class="o">=</span> <span class="n">AsynchronousConsensus</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
                                  <span class="n">initial_condition</span><span class="o">=</span><span class="n">x0</span><span class="p">,</span>
                                  <span class="n">enable_log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">force_sleep</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">maximum_sleep</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                  <span class="n">sleep_type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
                                  <span class="n">force_computation_time</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">maximum_computation_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                  <span class="n">computation_time_type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
                                  <span class="n">force_unreliable_links</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">link_failure_probability</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># run the algorithm</span>
<span class="n">timestamp_sequence_awake</span><span class="p">,</span> <span class="n">timestamp_sequence_sleep</span><span class="p">,</span> <span class="n">sequence</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">running_time</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># print solution</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Agent </span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">get_result</span><span class="p">()))</span>

<span class="c1"># save data</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agents.npy&quot;</span><span class="p">,</span> <span class="n">nproc</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_sequence.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">sequence</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_timestamp_sequence_awake.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">timestamp_sequence_awake</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_timestamp_sequence_sleep.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">timestamp_sequence_sleep</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Plot the generated sequences</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="c1"># number of agents</span>
<span class="n">N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;agents.npy&quot;</span><span class="p">)</span>

<span class="c1"># retrieve local sequences</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">timestamp_sequence_awake</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">timestamp_sequence_sleep</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">t_init</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_sequence.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_timestamp_sequence_awake.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;agent_</span><span class="si">{}</span><span class="s2">_timestamp_sequence_sleep.npy&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">t_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">t_init</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">t_init</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">t_init</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">t_init</span>
    <span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">t_init</span>

<span class="c1"># plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="n">dims</span> <span class="o">=</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                     <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Agent </span><span class="si">{}</span><span class="s2">: awakenings=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sequence</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                     <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;time (s)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;x_i&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Local estimates sequences&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;sequences.png&#39;</span><span class="p">)</span>

<span class="n">S</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">aw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">timestamp_sequence_awake</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">aw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">aw</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">aw</span><span class="o">.</span><span class="n">shape</span><span class="p">)])</span>
    <span class="n">sl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">timestamp_sequence_sleep</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">sl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">sl</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">sl</span><span class="o">.</span><span class="n">shape</span><span class="p">)])</span>
    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">aw</span><span class="p">,</span> <span class="n">sl</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
    <span class="n">signal</span> <span class="o">=</span> <span class="n">aux</span><span class="p">[</span><span class="n">aux</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">argsort</span><span class="p">()]</span>
    <span class="n">inverse_signal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">inverse_signal</span> <span class="o">+=</span> <span class="n">signal</span>
    <span class="n">inverse_signal</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">inverse_signal</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ww</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="n">signal</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">ww</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">signal</span>
    <span class="n">ww</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">inverse_signal</span>
    <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ww</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">N</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">][:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;time (s)&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;sleep_awake.png&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../../_images/sequences.png" src="../../_images/sequences.png" />
<img alt="../../_images/sleep_awake.png" src="../../_images/sleep_awake.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="logic_and.html" class="btn btn-neutral float-right" title="Distributed Logic AND" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, OPT4SMART

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>